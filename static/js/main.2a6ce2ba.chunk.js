(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{27:function(e,t,n){e.exports=n(43)},36:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(13),r=n.n(o),s=n(5),l=n(26),u=(n(36),n(7)),i=n(4),m=n.n(i),d=n(9),p="https://mate-api.herokuapp.com",f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return fetch("".concat(p,"/").concat(e,"/").concat(t),n).then((function(e){return e.json()})).then((function(e){return e.data}))},E=function(e){return f("comments").then((function(t){return t.filter((function(t){return t.postId===e}))}))},b=function(e){return f("comments","",e)},v=function(e){return f("posts").then((function(t){return t.filter((function(t){return e?t.userId===e:t}))}))},h=function(e){return{type:"SET_POSTS",posts:e}},_=function(e){return function(t){t(function(e){return{type:"UPDATE_ACTIVE_POST",activePostId:e}}(e))}},O=function(e){return e.posts.posts},P=function(e){return e.posts.activePostId},N=function(e){return e.posts.userId},j={posts:[],activePostId:0,userId:0},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return Object(u.a)(Object(u.a)({},e),{},{posts:t.posts});case"UPDATE_ACTIVE_POST":return Object(u.a)(Object(u.a)({},e),{},{activePostId:t.activePostId});case"UPDATE_USER_ID":return Object(u.a)(Object(u.a)({},e),{},{userId:t.userId});default:return e}},I=n(20),C=n(10),S=(n(38),n(39),function(){return c.a.createElement("div",{className:"Loader"},c.a.createElement("div",{className:"Loader__content"}))}),w=function(e){var t=e.selectedPostId,n=Object(s.b)(),o=Object(a.useState)(!1),r=Object(C.a)(o,2),l=r[0],u=r[1],i=Object(s.c)(O),p=Object(s.c)(N);Object(a.useEffect)((function(){n(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0),t.next=3,v().then((function(e){return n(h(e))}));case 3:e(!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(u))}),[n]);var f=Object(a.useMemo)((function(){var e=Object(I.a)(i);return i.length>0&&p&&(e=Object(I.a)(i).filter((function(e){return e.userId===p}))),e}),[i,p]);return c.a.createElement("div",{className:"PostsList"},c.a.createElement("h2",null,"Posts:"),l?c.a.createElement(S,null):c.a.createElement("ul",{className:"PostsList__list"},f.map((function(e){return c.a.createElement("li",{className:"PostsList__item",key:e.id,"meta-key":e.id},c.a.createElement("div",null,c.a.createElement("b",null,"[User #`$",e.userId,"`]:"," "),e.title),t===e.id?c.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){n(_(e.id))}},"Close"):c.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){n(_(e.id))}},"Open"))}))))},D=(n(40),function(e){var t=e.addComment,n=e.selectedPostId,a=e.updateCommentsForPost,o=document.AddComment;return c.a.createElement("form",{className:"NewCommentForm",name:"AddComment"},c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input"})),c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input"})),c.a.createElement("div",{className:"form-field"},c.a.createElement("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input"})),c.a.createElement("button",{type:"submit",method:"POST",className:"NewCommentForm__submit-button button",onClick:function(){var e=Object(d.a)(m.a.mark((function e(c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,t({method:"POST",body:JSON.stringify({postId:n,name:o.name.value,email:o.email.value,body:o.body.value}),headers:{"Content-type":"application/json; charset=utf-8"}});case 3:o.name.value="",o.email.value="",o.body.value="",a();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Add a comment"))}),T=(n(41),function(e){var t=e.selectedPostId,n=Object(a.useState)(!1),o=Object(C.a)(n,2),r=o[0],s=o[1],l=Object(a.useState)(),u=Object(C.a)(l,2),i=u[0],p=u[1],v=Object(a.useState)([]),h=Object(C.a)(v,2),_=h[0],O=h[1];Object(a.useEffect)((function(){var e;(e=t,f("posts",e).then((function(e){return e}))).then((function(e){p(e)})),E(t).then((function(e){O(e)}))}),[t]);return i?c.a.createElement("div",{className:"PostDetails"},c.a.createElement("h2",null,"Post details:"),c.a.createElement("section",{className:"PostDetails__post"},c.a.createElement("p",null,i.body)),_&&_.length>0&&c.a.createElement("section",{className:"PostDetails__comments"},r?c.a.createElement("button",{type:"button",className:"button",onClick:function(){s(!1)}},"Hide",_.length," ","comments"):c.a.createElement("button",{type:"button",className:"button",onClick:function(){s(!0)}},"Show"," ",_.length," ","comments"),c.a.createElement("ul",{className:"PostDetails__list"},r&&_.map((function(e){return c.a.createElement("li",{key:e.id,className:"PostDetails__list-item"},c.a.createElement("button",{type:"button",className:"PostDetails__remove-button button",onClick:Object(d.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a=e.id,f("comments",a,{method:"DELETE"});case 2:E(t).then((function(e){O(e)}));case 3:case"end":return n.stop()}var a}),n)})))},"X"),c.a.createElement("p",null,e.body))})))),c.a.createElement("section",null,c.a.createElement("div",{className:"PostDetails__form-wrapper"},c.a.createElement(D,{addComment:b,selectedPostId:t,updateCommentsForPost:function(){E(t).then((function(e){O(e)}))}})))):c.a.createElement(S,null)}),k=function(){var e=Object(s.b)(),t=Object(s.c)(P);return c.a.createElement("div",{className:"App"},c.a.createElement("h1",null,"Redux list of posts"),c.a.createElement("header",{className:"App__header"},c.a.createElement("label",null,"Select a user: \xa0",c.a.createElement("select",{className:"App__user-selector",onChange:function(t){return e((n=+t.target.value,function(e){e(function(e){return{type:"UPDATE_USER_ID",userId:e}}(n))}));var n}},c.a.createElement("option",{value:"0"},"All users"),c.a.createElement("option",{value:"1"},"Leanne Graham"),c.a.createElement("option",{value:"2"},"Ervin Howell"),c.a.createElement("option",{value:"3"},"Clementine Bauch"),c.a.createElement("option",{value:"4"},"Patricia Lebsack"),c.a.createElement("option",{value:"5"},"Chelsey Dietrich"),c.a.createElement("option",{value:"6"},"Mrs. Dennis Schulist"),c.a.createElement("option",{value:"7"},"Kurtis Weissnat"),c.a.createElement("option",{value:"8"},"Nicholas Runolfsdottir V"),c.a.createElement("option",{value:"9"},"Glenna Reichert"),c.a.createElement("option",{value:"10"},"Leanne Graham")))),c.a.createElement("main",{className:"App__main"},c.a.createElement("div",{className:"App__sidebar"},c.a.createElement(w,{selectedPostId:t})),t?c.a.createElement("div",{className:"App__content"},c.a.createElement(T,{selectedPostId:t})):""))},A=n(6),x=n(24),g=n(25),L=Object(A.combineReducers)({posts:y}),F=Object(A.createStore)(L,Object(x.composeWithDevTools)(Object(A.applyMiddleware)(g.a))),U=function(){return c.a.createElement(s.a,{store:F},c.a.createElement(l.a,null,c.a.createElement(k,null)))};r.a.render(c.a.createElement(U,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.2a6ce2ba.chunk.js.map